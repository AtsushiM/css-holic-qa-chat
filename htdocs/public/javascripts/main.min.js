(function(){var e=io.connect(),t=(new C.View({el:"#send",init:function(){this.username=this.el.find(".username input"),this.question=this.el.find(".question input")},events:{me:{submit:"submit"}},submit:function(t){t.preventDefault();var i=this.username.val(),n=this.question.val();n&&(i||(i="No name"),e.emit("sendquestion",{name:i,q:n}),this.question.val(""))}}),C.Model.extend({defaults:{name:"",q:"",time:0},validate:{name:C.validate.isString,q:C.validate.isString,time:C.validate.isNumber}})),i=C.Model.extend({defaults:{collection:[]},validate:{collection:C.validate.isArray},addQuestion:function(e){var t=this.get("collection");t.push(e),this.set("collection",t)}}),n=new i({});new C.View({el:"#questions",template:C.$("#template-question").html(),model:n,init:function(){var i=this;i.model.on("change",i.render),e.on("recivequestion",function(e){i.model.addQuestion(new t({defaults:e}))})},events:{},render:function(e){var t=e.collection,i=t[t.length-1].get();console.log(i),i.time=""+new Date(i.time);var n=C.util.template(this.template,i),o=C.dom.create("li");C.dom.html(o,n),this.el.insertBefore(o)}}),e.on("initializequestion",function(e){for(var i=0,o=e.length;o>i;i++)n.addQuestion(new t({defaults:e[i]}))})})();