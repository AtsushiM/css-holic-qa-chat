(function(){function e(e){i.add(new n({defaults:e}))}var t=io.connect(),n=(new C.View({el:"#send",init:function(){this.username=this.el.find(".username input"),this.question=this.el.find(".question input")},events:{me:{submit:"submit"}},submit:function(e){e.preventDefault();var n=this.username.val(),i=this.question.val();i&&(n||(n="No name"),t.emit("sendquestion",{name:n,q:i}),this.question.val(""))}}),C.Model.extend({defaults:{name:"",q:"",time:0},validate:{name:C.validate.isString,q:C.validate.isString,time:C.validate.isNumber}})),i=new C.Collection;new C.View({el:"#questions",template:C.$("#template-question").html(),collection:i,init:function(){var n=this;n.collection.on("change",n.render),t.on("recivequestion",e)},events:{},render:function(e){e=e.get(),e.time=""+new Date(e.time);var t=C.util.template(this.template,e),n=C.dom.create("li");C.dom.html(n,t),this.el.insertBefore(n)}}),t.on("initializequestion",function(t){for(var n=0,i=t.length;i>n;n++)e(t[n])}),function(){var e,t,n=C.$("h1"),i=n.html().replace("&amp;","&");for(n.html("<span>"+i.split("").join("</span><span>")+"</span>"),e=n.find("span"),t=e.length;t--;)C.dom.addClass(e[t],"letter"+t)}()})();